(this["webpackJsonpreact-client-tool"]=this["webpackJsonpreact-client-tool"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(1),r=n.n(a),s=n(23),i=n.n(s),o=(n(80),n(25)),l=n(8),j=(n(81),n(119)),u=n(126),b=n(71),d=n(120);function O(e,t){var n=localStorage.getItem(e);return n?JSON.parse(n):t}function h(e,t){return localStorage.setItem(e,JSON.stringify(t)),t}function f(e){var t=e.connData,n=e.createConnection,r=e.eventsToListenFor,s=e.emitTo,i=Object(a.useState)([]),o=Object(l.a)(i,2),O=o[0],f=o[1],x=Object(a.useState)([]),v=Object(l.a)(x,2),m=v[0],g=v[1],p=Object(a.useState)(),y=Object(l.a)(p,2),S=y[0],k=y[1];return Object(a.useEffect)((function(){k((function(){return t.config})),g((function(){return t.server}))}),[t]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(j.a,{variant:"danger",show:t.errors.length>0||O.length>0,children:[t.errors.join(", ")," ",O.join(", ")]}),Object(c.jsxs)(u.a,{onSubmit:function(e){e.preventDefault(),e.stopPropagation();try{JSON.parse(S)}catch(e){return console.log("cannot parse config json",e),void f((function(){return[e]}))}f((function(){return[]})),n(h("server",m),h("config",S))},children:[Object(c.jsx)(u.a.Row,{className:"mb-2",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{required:!0,value:m,placeholder:"server url",type:"url",onChange:function(e){return g(e.target.value)}})})}),Object(c.jsx)(u.a.Row,{className:"mb-2",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{as:"textarea",placeholder:"JSON config",value:S,onChange:function(e){return k(e.target.value)}})})}),Object(c.jsx)(u.a.Row,{className:"mt-2",children:Object(c.jsxs)(b.a,{children:[Object(c.jsxs)(u.a.Text,{className:"mb-2",children:[Object(c.jsx)("strong",{children:"Listen to"}),": ",r.join(", ")," ",Object(c.jsx)("strong",{children:"Emit to"}),": ",s.join(", ")]}),Object(c.jsx)(d.a,{variant:"success",type:"submit",block:!0,disabled:t.loading,children:t.loading?"Connecting...":"Connect"}),Object(c.jsxs)("div",{className:"mt-3 text-center text-warning",children:["This uses socket.io version 3 and above. For version 2.x use the previous version of socketio-client-tool ",Object(c.jsx)("a",{href:"v1/",children:"here"}),"."]})]})})]})]})}var x=n(128),v=n(121),m=n(122),g=n(72);function p(e){var t=e.data,n=e.title,a=e.stack,r=e.channels,s=e.clearHistory,i=e.emitBack,o=t.map((function(e){return Object(c.jsx)(x.a.Item,{children:Object(c.jsxs)(v.a,{children:[Object(c.jsxs)(b.a,{sm:4,children:[Object(c.jsx)("small",{children:e.date.toLocaleTimeString()})," ",Object(c.jsx)("br",{})," ",Object(c.jsx)(m.a,{variant:"info",children:e.channel})]}),Object(c.jsxs)(b.a,{children:[Object(c.jsx)("div",{className:"float-right",children:Object(c.jsx)(d.a,{className:"function"!==typeof i?"d-none":"",size:"sm",variant:"warning",onClick:function(t){return function(e,t){"function"===typeof i&&i(t.channel,t.data)}(0,e)},children:"emit"})}),Object(c.jsx)("pre",{children:"string"===typeof e.data?e.data:JSON.stringify(e.data,null,2)})]})]})},e.date.toISOString()+"--"+e.channel)}));return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"mt-4 histories",children:[Object(c.jsxs)("h3",{children:[n,Object(c.jsxs)(d.a,{size:"sm",onClick:function(e){s(a,r)},className:o.length>0?"ml-2 ":"d-none",variant:"danger",children:[Object(c.jsx)(g.a,{className:"mr-2"}),"clear"]})]}),Object(c.jsx)(x.a,{variant:"flush rounded text-white",children:o})]})})}function y(e){var t=e.listeners,n=e.addListener,r=e.listenHistory,s=e.clearHistory,i=Object(a.useState)(""),O=Object(l.a)(i,2),h=O[0],f=O[1],x=Object(a.useState)([]),v=Object(l.a)(x,2),m=v[0],g=v[1],y=function(e){return r.filter((function(t){return e===t.channel}))},S=t.map((function(e,t){return Object(c.jsx)(p,{data:y(e),title:e,stack:"listen",channels:[e],clearHistory:s},t)}));return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(j.a,{variant:"danger",show:m.length>0,children:m.join(", ")}),Object(c.jsx)(u.a,{onSubmit:function(e){e.preventDefault(),n([h]),f("")},noValidate:!0,validated:0===m.length,children:Object(c.jsxs)(u.a.Row,{className:"mb-2",children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{placeholder:"listen to a new event...",value:h,onChange:function(e){f(e.target.value.trim()),g((function(e){return[]})),t.includes(e.target.value)&&g((function(e){return[].concat(Object(o.a)(e),["Event already exists"])}))}})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(d.a,{variant:"success",type:"submit",block:!0,disabled:0!==m.length||h.length<1,children:"Add"})})]})})]}),Object(c.jsx)("h3",{children:"Listening to"}),S]})}function S(e){var t=e.emitToChannels,n=e.addEmitTo,r=e.emitData,s=e.emitHistory,i=e.clearHistory,o=e.stack,O=Object(a.useState)("socketio-client"),h=Object(l.a)(O,2),f=h[0],x=h[1],v=Object(a.useState)(""),m=Object(l.a)(v,2),g=m[0],y=m[1],S=Object(a.useState)(!1),k=Object(l.a)(S,2),N=k[0],w=k[1],C=Object(a.useState)(""),H=Object(l.a)(C,2),T=H[0],J=H[1],E=Object(a.useState)([]),D=Object(l.a)(E,2),I=D[0],L=D[1],R=t.map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(u.a,{onSubmit:function(e){e.preventDefault(),n(T),J(""),x((function(){return T}))},className:"mb-3",children:Object(c.jsxs)(u.a.Row,{children:[Object(c.jsx)(b.a,{xs:4,children:Object(c.jsx)(u.a.Control,{size:"sm",value:T,onChange:function(e){return J(e.target.value)},placeholder:"Event name"})}),Object(c.jsx)(b.a,{xs:2,children:Object(c.jsx)(d.a,{size:"sm",variant:"info",type:"submit",block:!0,children:"Add"})})]})}),Object(c.jsx)("hr",{}),Object(c.jsxs)(u.a,{onSubmit:function(e){e.preventDefault();var t=g;if(!0===N)try{t=JSON.parse(g)}catch(n){return void L((function(){return["Failed to parse JSON data: ".concat(n)]}))}y((function(){return""})),L((function(){return[]})),r(f,t)},children:[Object(c.jsx)(j.a,{variant:"danger",show:I.length>0,children:I.join(", ")}),Object(c.jsxs)(u.a.Row,{className:"mb-2",children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{as:"select",value:f,onChange:function(e){return x(e.target.value)},children:R})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Check,{type:"switch",id:"is-json",label:"JSON data",value:N,onChange:function(e){return w((function(){return e.target.checked}))},placeholder:"data...",className:"pt-3 pl-5"})})]}),Object(c.jsx)(u.a.Row,{className:"mb-2",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{as:"textarea",value:g,onChange:function(e){return y(e.target.value)}})})}),Object(c.jsx)(u.a.Row,{children:Object(c.jsx)(b.a,{children:Object(c.jsx)(d.a,{variant:"success",type:"submit",block:!0,children:"Emit"})})})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"mt-4",children:Object(c.jsx)(p,{data:s,emitBack:r,title:"Messages",clearHistory:i,stack:o})})]})}function k(e){var t=e.ackHistory,n=e.clearHistory;return Object(c.jsx)(p,{data:t,title:"Messages",stack:"ack",clearHistory:n})}var N=n(73),w=n(123),C=n(127),H=n(124),T=n(125),J=n(56);var E=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),i=Object(l.a)(s,2),j=i[0],u=i[1],d=Object(a.useRef)();d.current=j;var h=Object(a.useState)({connected:!1,loading:!1,server:O("server","localhost:8080"),config:O("config",'{"path": "/socket.io", "forceNew": true, "reconnectionAttempts": 3, "timeout": 2000}'),errors:[]}),x=Object(l.a)(h,2),m=x[0],g=x[1],p=Object(a.useState)(0),E=Object(l.a)(p,2),D=E[0],I=E[1],L=Object(a.useState)(["socketio-client","message"]),R=Object(l.a)(L,2),A=R[0],z=R[1],F=Object(a.useState)([]),B=Object(l.a)(F,2),K=B[0],M=B[1],U=Object(a.useState)(["socketio-client","socketio-client-ack"]),q=Object(l.a)(U,2),P=q[0],V=q[1],G=Object(a.useState)([]),Q=Object(l.a)(G,2),W=Q[0],X=Q[1],Y=Object(a.useState)([]),Z=Object(l.a)(Y,2),$=Z[0],_=Z[1],ee=Object(a.useState)([]),te=Object(l.a)(ee,2),ne=te[0],ce=te[1];function ae(e){e.forEach((function(e){var t=[];K.includes(e)||(t.push(e),n.on(e,(function(t){console.log("data received",e,t);var n=new Date,c={key:n.toLocaleString(),date:n,channel:e,data:"string"===typeof t?t:JSON.stringify(t,null,2),dataType:"string"===typeof t?"string":"json"};_((function(e){return[c].concat(Object(o.a)(e))}))}))),M((function(e){return[].concat(t,Object(o.a)(e))}))}))}function re(e,t){switch(e){case"emit":X((function(){return[]}));break;case"listen":_((function(e){return e.filter((function(e){return!t.includes(e.channel)}))}));break;case"ack":ce((function(){return[]}))}}return Object(a.useEffect)((function(){null!==n&&n.on("connect",(function(){!0!==d.current&&(g((function(){return{connected:!0,loading:!1,server:m.url,socketId:n.id,config:m.config,errors:[]}})),ae(A),u((function(){return!0})))}))})),Object(a.useEffect)((function(){}),[K]),Object(a.useEffect)((function(){if(m.connected)!function(){var e={server:m.server,listen:K,emit:P,config:m.config};window.location.hash=window.btoa(JSON.stringify(e))}();else{var e=""!==window.location.hash&&JSON.parse(window.atob(window.location.hash.split("#")[1]));!1!==e&&0===D&&(I((function(){return 1})),e.listen.length>0&&z((function(){return e.listen})),V((function(){return e.emit})),g((function(){return{connected:!1,loading:!1,server:e.server,config:e.config,errors:[]}})))}}),[m.connected,m.server,m.config,K,P,D]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)(w.a,{children:[Object(c.jsx)(v.a,{children:Object(c.jsxs)(b.a,{className:"text-right",children:[Object(c.jsxs)("span",{className:"small",children:["ID: ",Object(c.jsx)("b",{children:m.socketId})," Server: ",Object(c.jsx)("b",{children:m.server})]}),m.connected?Object(c.jsx)(J.a,{className:"text-success ml-3 h3"}):Object(c.jsx)(J.b,{className:"text-danger mx-2 h3"})]})}),Object(c.jsx)(v.a,{children:Object(c.jsx)(b.a,{children:Object(c.jsxs)(C.a,{defaultActiveKey:"listen",className:"mb-4 nav-fillx",children:[Object(c.jsx)(H.a,{eventKey:"listen",title:"Listen",children:Object(c.jsx)(y,{listeners:K,addListener:ae,listenHistory:$,clearHistory:re,stack:"listen"})}),Object(c.jsx)(H.a,{eventKey:"emit",title:"Emit",children:Object(c.jsx)(S,{emitToChannels:P,addEmitTo:function(e){V((function(t){return[e].concat(Object(o.a)(t))}))},emitData:function(e,t){n.emit(e,t,(function(t){var n=new Date,c={key:n.toUTCString(),channel:e,date:n,data:t,type:"string"===typeof t?"string":"json"};ce((function(e){return[c].concat(Object(o.a)(e))}))}));var c=new Date,a={key:c.toUTCString(),channel:e,date:c,data:t,type:"string"===typeof t?"string":"json"};X((function(e){return[a].concat(Object(o.a)(e))}))},emitHistory:W,clearHistory:re,stack:"emit"})}),Object(c.jsx)(H.a,{eventKey:"ack",title:"Ack",children:Object(c.jsx)(k,{ackHistory:ne,stack:"ack",clearHistory:re})})]})})})]}),Object(c.jsxs)(T.a,{show:!m.connected,backdrop:"static",centered:!0,size:"lg",children:[Object(c.jsx)(T.a.Header,{children:Object(c.jsx)(T.a.Title,{children:"Configure connection"})}),Object(c.jsx)(T.a.Body,{children:Object(c.jsx)(f,{eventsToListenFor:A,emitTo:P,connData:m,createConnection:function(e,t){g((function(){return{connected:!1,loading:!0,socketId:"connecting..",server:e,config:t,errors:[]}})),r((function(){return Object(N.io)(e,JSON.parse(t))}))}})})]})]})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(E,{})}),document.getElementById("root"))},80:function(e,t,n){},81:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.865e36a8.chunk.js.map